---
import ContactIcon from "@/components/icons/navbar/ContactIcon.astro";
import HomeIcon from "@/components/icons/navbar/HomeIcon.astro";
import ProjectIcon from "@/components/icons/navbar/ProjectIcon.astro";

import { type LinkItem } from "@/interfaces/LinkItem.interface";
import NavbarItem from "./NavbarItem.astro";

const links: LinkItem[] = [
  {
    href: "#home",
    label: "Inicio",
    icon: HomeIcon,
  },
  {
    href: "#projects",
    label: "Proyectos",
    icon: ProjectIcon,
  },
  {
    href: "#contact",
    label: "Contactos",
    icon: ContactIcon,
  },
];
---

<div class="flex justify-center w-full">
  <nav
    id="navbar"
    class="fixed bottom-0 left-1/2 -translate-x-1/2
        text-white z-[100] border border-transparent 
        backdrop-blur-lg transition-all duration-500 
        ease-in-out md:top-6 md:bottom-auto w-[100%]"
  >
    <div class="container mx-auto flex justify-center items-center p-3">
      <ul class="flex w-full justify-between gap-6">
        {links.map((link) => <NavbarItem link={link} />)}
      </ul>
    </div>
  </nav>
</div>

<style>
  #navbar.scrolling {
    border-radius: 9999px;
    border-color: #ffffff10;
    width: 80%;
  }

  @media (max-width: 767px) {
    #navbar {
      width: 100% !important;
      border-radius: 2rem 2rem 0 0;
      border-color: #ffffff20;
    }
  }
</style>

<script>
  if (typeof window !== "undefined") {
    const navbar = document.getElementById("navbar") as HTMLElement;

    window.addEventListener("scroll", () => {
      if (window.innerWidth > 767 && window.scrollY > 25) {
        navbar.classList.add("scrolling");
      } else {
        navbar.classList.remove("scrolling");
      }
    });
  }
</script>
